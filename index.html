<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Learning Signals - AI Transcript Analysis Platform</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <style>
    :root {
      --bg: #0d1117;
      --card: #161b22;
      --text: #e6edf3;
      --muted: #7d8590;
      --border: rgba(240, 246, 252, 0.1);
      --accent: #2f81f7;
      --accent2: #238636;
      --success: #3fb950;
      --warning: #d29922;
      --radius: 12px;
      --sans: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: var(--sans);
      color: var(--text);
      background: var(--bg);
      min-height: 100vh;
    }
    
    .wrap {
      max-width: 1440px;
      margin: 0 auto;
    }
    
    .header {
      background: linear-gradient(180deg, #161b22 0%, #0d1117 100%);
      border-bottom: 1px solid var(--border);
      padding: 20px 32px;
      position: sticky;
      top: 0;
      z-index: 100;
      backdrop-filter: blur(10px);
    }
    
    .header-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .logo {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .logo-icon {
      width: 36px;
      height: 36px;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
    }
    
    .logo-text h1 {
      font-size: 20px;
      margin: 0;
      font-weight: 700;
    }
    
    .logo-text p {
      color: var(--muted);
      font-size: 13px;
      margin-top: 2px;
    }
    
    .header-tags {
      display: flex;
      gap: 8px;
    }
    
    .tag {
      padding: 6px 12px;
      background: rgba(47, 129, 247, .15);
      border: 1px solid rgba(47, 129, 247, .3);
      border-radius: 16px;
      font-size: 11px;
      font-weight: 600;
      color: var(--accent);
      text-transform: uppercase;
      letter-spacing: .5px;
    }
    
    .main {
      display: grid;
      grid-template-columns: 340px 1fr;
      min-height: calc(100vh - 77px);
    }
    
    @media (max-width: 1200px) {
      .main {
        grid-template-columns: 1fr;
      }
    }
    
    .sidebar {
      background: var(--card);
      border-right: 1px solid var(--border);
      padding: 24px;
      overflow-y: auto;
    }
    
    .section-title {
      font-size: 14px;
      margin: 0 0 16px;
      padding-bottom: 10px;
      border-bottom: 1px solid var(--border);
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: .5px;
      color: var(--muted);
    }
    
    .kpi-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-bottom: 20px;
    }
    
    .kpi-box {
      padding: 16px;
      background: rgba(47, 129, 247, .08);
      border: 1px solid rgba(47, 129, 247, .2);
      border-radius: 10px;
      text-align: center;
    }
    
    .kpi-num {
      font-size: 32px;
      font-weight: 800;
      color: var(--accent);
      margin-bottom: 4px;
    }
    
    .kpi-label {
      color: var(--muted);
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: .5px;
    }
    
    .btn {
      width: 100%;
      padding: 12px 18px;
      margin: 8px 0;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      font-size: 13px;
      cursor: pointer;
      transition: all .2s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    
    .btn-primary {
      background: var(--accent);
      color: white;
    }
    
    .btn-primary:hover:not(:disabled) {
      background: #1f6feb;
      transform: translateY(-1px);
    }
    
    .btn-success {
      background: var(--success);
      color: white;
    }
    
    .btn-success:hover:not(:disabled) {
      background: #2ea043;
      transform: translateY(-1px);
    }
    
    .btn:disabled {
      opacity: .5;
      cursor: not-allowed;
    }
    
    .status {
      margin: 12px 0;
      padding: 10px 12px;
      border-radius: 8px;
      background: rgba(63, 185, 80, .1);
      border: 1px solid rgba(63, 185, 80, .2);
      color: var(--success);
      font-size: 12px;
    }
    
    .status.error {
      background: rgba(248, 81, 73, .1);
      border: 1px solid rgba(248, 81, 73, .2);
      color: #f85149;
    }
    
    .content {
      padding: 24px 32px;
      overflow-y: auto;
      max-height: calc(100vh - 77px);
    }
    
    .tabs {
      display: flex;
      gap: 4px;
      margin-bottom: 24px;
      border-bottom: 1px solid var(--border);
    }
    
    .tab {
      padding: 12px 20px;
      background: transparent;
      border: none;
      color: var(--muted);
      cursor: pointer;
      border-bottom: 2px solid transparent;
      transition: all .2s;
      font-size: 14px;
      font-weight: 600;
    }
    
    .tab.active {
      color: var(--text);
      border-bottom-color: var(--accent);
    }
    
    .tab-content {
      display: none;
    }
    
    .tab-content.active {
      display: block;
    }
    
    .dashboard-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 16px;
      margin-bottom: 24px;
    }
    
    @media (max-width: 1200px) {
      .dashboard-grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    
    .stat-card {
      padding: 20px;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
    }
    
    .stat-value {
      font-size: 36px;
      font-weight: 800;
      color: var(--accent);
      margin-bottom: 8px;
    }
    
    .stat-label {
      color: var(--muted);
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: .5px;
    }
    
    .chart-container {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
    }
    
    .chart-title {
      font-size: 16px;
      font-weight: 700;
      margin-bottom: 16px;
      color: var(--text);
    }
    
    .pattern-card {
      padding: 20px;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
      margin-bottom: 16px;
    }
    
    .pattern-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 12px;
    }
    
    .pattern-title {
      font-size: 18px;
      font-weight: 700;
      color: var(--accent);
    }
    
    .pattern-subtitle {
      font-size: 13px;
      color: var(--muted);
      font-weight: 400;
      margin-top: 4px;
    }
    
    .keywords {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin: 12px 0;
    }
    
    .keyword {
      padding: 6px 12px;
      background: rgba(47, 129, 247, .12);
      border: 1px solid rgba(47, 129, 247, .25);
      border-radius: 16px;
      font-size: 12px;
      color: var(--accent);
    }
    
    .ai-insight {
      margin-top: 12px;
      padding: 14px;
      background: rgba(47, 129, 247, .08);
      border-left: 3px solid var(--accent);
      border-radius: 8px;
    }
    
    .ai-insight-header {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: .5px;
      color: var(--accent);
      font-weight: 700;
      margin-bottom: 8px;
    }
    
    .ai-insight-content {
      color: var(--text);
      line-height: 1.6;
      font-size: 13px;
    }
    
    .quote {
      margin-top: 12px;
      padding: 12px;
      background: rgba(63, 185, 80, .08);
      border-left: 3px solid var(--success);
      border-radius: 8px;
      font-size: 12px;
      line-height: 1.5;
      font-style: italic;
      color: var(--muted);
    }
    
    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: var(--muted);
    }
    
    .loading {
      text-align: center;
      padding: 40px;
      color: var(--muted);
    }
    
    .spinner {
      border: 3px solid rgba(47, 129, 247, .2);
      border-top: 3px solid var(--accent);
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: 0 auto 16px;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .guide-section {
      margin-bottom: 24px;
      padding: 20px;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
    }
    
    .guide-section h3 {
      font-size: 16px;
      color: var(--accent);
      margin-bottom: 12px;
      font-weight: 700;
    }
    
    .guide-section p {
      color: var(--muted);
      line-height: 1.7;
      font-size: 13px;
      margin-bottom: 10px;
    }
    
    .guide-section ul {
      color: var(--muted);
      font-size: 13px;
      line-height: 1.8;
      margin-left: 20px;
      margin-bottom: 10px;
    }
    
    .guide-section ul li {
      margin-bottom: 6px;
    }
    
    .guide-section strong {
      color: var(--text);
    }
    
    .guide-section code {
      background: rgba(47, 129, 247, .15);
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 12px;
      color: var(--accent);
      font-family: monospace;
    }
    
    .pipeline-diagram {
      background: rgba(0, 0, 0, .2);
      padding: 16px;
      border-radius: 8px;
      font-family: monospace;
      font-size: 11px;
      line-height: 2;
      color: var(--muted);
      margin: 16px 0;
    }
    
    .info-note {
      margin-top: 20px;
      padding: 12px;
      background: rgba(47, 129, 247, .08);
      border: 1px solid rgba(47, 129, 247, .2);
      border-radius: 8px;
      font-size: 12px;
      line-height: 1.5;
      color: var(--muted);
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="header">
      <div class="header-content">
        <div class="logo">
          <div class="logo-icon">üìä</div>
          <div class="logo-text">
            <h1>Learning Signals</h1>
            <p>AI-Powered Transcript Analysis Platform</p>
          </div>
        </div>
        <div class="header-tags">
          <span class="tag">Education</span>
          <span class="tag">Business</span>
          <span class="tag">Research</span>
        </div>
      </div>
    </div>

    <div class="main">
      <!-- Sidebar -->
      <div class="sidebar">
        <div class="section-title">Data Source</div>

        <div class="kpi-grid">
          <div class="kpi-box">
            <div class="kpi-num" id="totalTranscripts">0</div>
            <div class="kpi-label">Transcripts</div>
          </div>
          <div class="kpi-box">
            <div class="kpi-num" id="totalWords">0</div>
            <div class="kpi-label">Total Words</div>
          </div>
        </div>

        <button class="btn btn-success" id="loadSample">
          <span>üìù</span> Load Demo Data
        </button>

        <button class="btn btn-primary" id="analyzeBtn" disabled>
          <span>üöÄ</span> Analyze Transcripts
        </button>

        <div class="status" id="status">Ready to analyze</div>

        <div class="info-note">
          <strong>üí° Demo Mode</strong><br>
          This demo uses 16 sample student transcripts. Production version supports batch upload of 1,000+ transcripts via CSV.
        </div>
      </div>

      <!-- Main Content -->
      <div class="content">
        <div class="tabs">
          <button class="tab active" data-tab="dashboard">üìä Dashboard</button>
          <button class="tab" data-tab="patterns">üîç Pattern Analysis</button>
          <button class="tab" data-tab="guide">üìö Resources & Guide</button>
        </div>

        <!-- Dashboard Tab -->
        <div class="tab-content active" id="tab-dashboard">
          <div id="dashboardContent">
            <div class="empty-state">
              <div style="font-size:48px;margin-bottom:16px">üìà</div>
              <h3 style="margin-bottom:8px;font-size:18px">No Analysis Yet</h3>
              <p>Click "Load Demo Data" then "Analyze Transcripts" to see insights</p>
            </div>
          </div>
        </div>

        <!-- Pattern Analysis Tab -->
        <div class="tab-content" id="tab-patterns">
          <div id="patternsContent">
            <div class="empty-state">
              <div style="font-size:48px;margin-bottom:16px">üîç</div>
              <h3 style="margin-bottom:8px;font-size:18px">No Patterns Detected</h3>
              <p>Run analysis to discover themes and extract insights</p>
            </div>
          </div>
        </div>

        <!-- Guide Tab -->
        <div class="tab-content" id="tab-guide">
          <div class="guide-section">
            <h3>üéØ What Learning Signals Does</h3>
            <p>
              Learning Signals analyzes large volumes of qualitative text data‚Äîsuch as student reflections, 
              interview transcripts, and course feedback‚Äîto automatically discover patterns and themes using 
              AI-powered natural language processing techniques.
            </p>
            <p>
              The platform is designed for educational researchers, instructors, and organizational leaders who 
              need to process hundreds or thousands of text responses to identify key insights, trends, and areas of focus.
            </p>
          </div>

          <div class="guide-section">
            <h3>üî¨ Technical Methodology</h3>
            <p><strong>Step 1: Text Vectorization (TF-IDF)</strong></p>
            <p>
              Each transcript is converted into a numerical vector using Term Frequency-Inverse Document Frequency (TF-IDF). 
              This captures the semantic meaning of text by weighting terms based on their importance within individual 
              documents and across the entire corpus.
            </p>
            
            <p><strong>Step 2: Pattern Detection (K-Means Clustering)</strong></p>
            <p>
              K-means clustering algorithm groups similar transcripts together based on cosine similarity of their vectors. 
              This unsupervised machine learning approach discovers natural patterns without predefined categories.
            </p>
            
            <p><strong>Step 3: Keyword Extraction</strong></p>
            <p>
              For each cluster, the system identifies the most distinctive terms by analyzing TF-IDF weights. 
              These keywords characterize the theme of each pattern.
            </p>
            
            <p><strong>Step 4: Theme Naming & Interpretation</strong></p>
            <p>
              AI-powered logic generates descriptive pattern names (e.g., "Collaboration & Teamwork") and educational 
              interpretations based on the extracted keywords and representative quotes.
            </p>
          </div>

          <div class="guide-section">
            <h3>üìä Use Cases</h3>
            <ul>
              <li><strong>Education:</strong> Analyze student reflections, course evaluations, learning journals, exit interviews</li>
              <li><strong>Business:</strong> Process customer interviews, employee feedback surveys, stakeholder input</li>
              <li><strong>Research:</strong> Qualitative data analysis at scale (100s to 1,000s of text responses)</li>
              <li><strong>Voice AI Integration:</strong> Process transcripts from voice interview agents (like the LEARN Lab's voice AI system)</li>
              <li><strong>Course Analytics:</strong> Identify learning patterns across large cohorts of students</li>
            </ul>
          </div>

          <div class="guide-section">
            <h3>üèóÔ∏è Production Architecture</h3>
            <p>This demo runs entirely in the browser. For production deployment with 1,000+ transcripts:</p>
            
            <div class="pipeline-diagram">
Voice/Data Input ‚Üí Batch Ingestion ‚Üí ETL Pipeline<br>
&nbsp;&nbsp;&nbsp;&nbsp;‚Üì&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;‚Üì<br>
Transcription Service&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PostgreSQL (metadata)<br>
&nbsp;&nbsp;&nbsp;&nbsp;‚Üì&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;‚Üì<br>
CSV/API Upload&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Vector DB (Pinecone)<br>
&nbsp;&nbsp;&nbsp;&nbsp;‚Üì&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;‚Üì<br>
Background Jobs&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Celery + Redis<br>
&nbsp;&nbsp;&nbsp;&nbsp;‚Üì&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;‚Üì<br>
LLM Processing&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Claude/GPT-4<br>
&nbsp;&nbsp;&nbsp;&nbsp;‚Üì&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;‚Üì<br>
Dashboard/API Output&nbsp;&nbsp;&nbsp;&nbsp;Research Interface
            </div>
            
            <p><strong>Recommended Tech Stack:</strong></p>
            <ul>
              <li><strong>Backend:</strong> Python with FastAPI framework</li>
              <li><strong>Database:</strong> PostgreSQL for transcript metadata and text storage</li>
              <li><strong>Vector Store:</strong> Pinecone or Weaviate for semantic search</li>
              <li><strong>Task Queue:</strong> Celery with Redis for background processing</li>
              <li><strong>LLM:</strong> Claude Sonnet 4 or GPT-4 for theme interpretation</li>
              <li><strong>Frontend:</strong> React with Tailwind CSS</li>
              <li><strong>Hosting:</strong> AWS, Google Cloud, or Azure</li>
            </ul>
          </div>

          <div class="guide-section">
            <h3>‚è±Ô∏è Scale Estimates (1,200 Transcripts)</h3>
            <p><strong>Performance Benchmarks:</strong></p>
            <ul>
              <li>Batch ingestion: 2-3 hours for full upload</li>
              <li>Embedding generation: 1-2 hours (using OpenAI ada-002)</li>
              <li>LLM analysis: 3-4 hours (batch processing with rate limiting)</li>
              <li>Query response time: <2 seconds per semantic search</li>
            </ul>
            
            <p><strong>Cost Estimates:</strong></p>
            <ul>
              <li>LLM processing: ~$150-200 one-time (Claude Sonnet for theme extraction)</li>
              <li>Embeddings: ~$5-10 one-time (OpenAI ada-002)</li>
              <li>Vector database: ~$70/month (Pinecone starter tier)</li>
              <li>Infrastructure: ~$50/month (AWS EC2 + RDS)</li>
              <li><strong>Total first month: ~$275-330</strong></li>
              <li><strong>Ongoing monthly: ~$120</strong></li>
            </ul>
            
            <p><strong>Development Timeline:</strong></p>
            <ul>
              <li>Week 1-2: Backend API development, database setup, ingestion pipeline</li>
              <li>Week 3: Vector database integration, embedding generation</li>
              <li>Week 4: LLM integration, theme extraction, testing</li>
              <li>Week 5: Dashboard integration, production deployment, documentation</li>
            </ul>
          </div>

          <div class="guide-section">
            <h3>üîê Research Ethics & Privacy</h3>
            <p>Learning Signals is designed with educational research principles:</p>
            <ul>
              <li><strong>Non-evaluative:</strong> Does not grade, score, or rank individual learners</li>
              <li><strong>Transparent:</strong> All pattern detection logic and outputs are explainable</li>
              <li><strong>Human-in-the-loop:</strong> Requires expert validation of AI-generated interpretations</li>
              <li><strong>Privacy-preserving:</strong> Demo uses local browser storage; production implements data governance</li>
              <li><strong>Bias-aware:</strong> Acknowledges potential algorithmic bias; outputs should be reviewed critically</li>
              <li><strong>Purpose-built:</strong> Supports researcher sensemaking, not automated decision-making about students</li>
            </ul>
          </div>

          <div class="guide-section">
            <h3>üöÄ Integration with Voice AI Systems</h3>
            <p>
              This platform is designed to integrate with voice-based AI interview systems. The typical workflow:
            </p>
            <ul>
              <li>Voice AI agents conduct interviews with students, customers, or employees</li>
              <li>Conversations are transcribed to text (via Whisper, Google Speech, etc.)</li>
              <li>Transcripts are batch-uploaded to Learning Signals (CSV or API)</li>
              <li>System processes transcripts, extracts themes, generates insights</li>
              <li>Results feed into dashboards (like NUance) for researcher exploration</li>
            </ul>
            <p>
              <strong>Example:</strong> For a business communication course with 300 students conducting 4 interviews each 
              (1,200 total transcripts), the pipeline would ingest all transcripts, identify 5-8 major communication themes, 
              and provide instructors with actionable insights about student learning patterns.
            </p>
          </div>

          <div class="guide-section">
            <h3>üíª Technical Implementation</h3>
            <p><strong>Current Demo:</strong></p>
            <ul>
              <li>Pure JavaScript (no framework dependencies)</li>
              <li>Client-side TF-IDF and K-means implementation</li>
              <li>Chart.js for data visualization</li>
              <li>Runs entirely in browser (no backend required)</li>
            </ul>
            
            <p><strong>Production Enhancements:</strong></p>
            <ul>
              <li>RESTful API for transcript upload and retrieval</li>
              <li>Advanced embedding models (OpenAI, Cohere, or custom)</li>
              <li>Vector similarity search for semantic querying</li>
              <li>LLM-powered natural language query interface</li>
              <li>Real-time processing status and progress tracking</li>
              <li>Export capabilities (PDF reports, CSV data, JSON API)</li>
            </ul>
          </div>

          <div class="guide-section">
            <h3>üìñ How to Use This Demo</h3>
            <ol style="color:var(--muted);font-size:13px;line-height:1.8;margin-left:20px">
              <li>Click <strong>"Load Demo Data"</strong> to load 16 sample student transcripts</li>
              <li>Click <strong>"Analyze Transcripts"</strong> to run the analysis pipeline</li>
              <li>View the <strong>Dashboard</strong> tab to see charts and overall statistics</li>
              <li>Explore the <strong>Pattern Analysis</strong> tab to review detailed themes, keywords, and representative quotes</li>
              <li>Review this <strong>Resources & Guide</strong> tab to understand methodology and production architecture</li>
            </ol>
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
// Sample transcript data
const SAMPLE_DATA = [
  {
    id: 1,
    name: "STU001_Interview1",
    text: "Working with my team on the group presentation taught me invaluable lessons about collaboration. We used shared documents and regular check-ins to stay coordinated. Each member brought different strengths and we learned to delegate effectively based on those strengths."
  },
  {
    id: 2,
    name: "STU001_Interview2",
    text: "Presenting to the class was nerve-wracking at first. I practiced my delivery multiple times and focused on making eye contact. The feedback helped me understand that pausing for emphasis makes presentations more engaging and helps the audience follow along better."
  },
  {
    id: 3,
    name: "STU002_Interview1",
    text: "Time management became my biggest area of growth this semester. Balancing multiple assignments while maintaining quality required strategic planning. I started using project management tools and breaking large tasks into daily milestones which made everything more manageable."
  },
  {
    id: 4,
    name: "STU002_Interview2",
    text: "The iterative revision process significantly improved my business writing. Each draft incorporated feedback from peers and the instructor. I learned that professional communication requires multiple rounds of refinement and careful attention to audience needs and context."
  },
  {
    id: 5,
    name: "STU003_Interview1",
    text: "Working with diverse team members expanded my understanding of business communication. Team members from different cultural backgrounds approached problems with unique frameworks. This diversity taught me to listen actively and consider multiple viewpoints before making decisions."
  },
  {
    id: 6,
    name: "STU003_Interview2",
    text: "Applying communication theory to real business cases was eye-opening. Reading about stakeholder analysis is completely different from identifying actual stakeholders in case studies. This practical application made abstract concepts tangible and memorable for future use."
  },
  {
    id: 7,
    name: "STU004_Interview1",
    text: "The instructor's office hours provided crucial support for understanding complex concepts. Having one-on-one time to ask questions and receive personalized explanations accelerated my learning significantly. I discovered that seeking help early prevents misunderstandings from compounding."
  },
  {
    id: 8,
    name: "STU004_Interview2",
    text: "Professional networking simulations prepared me for real-world interactions. Practicing elevator pitches and informational interviews in class built confidence and competence. The structured feedback after each simulation highlighted specific areas for improvement in my communication approach."
  },
  {
    id: 9,
    name: "STU005_Interview1",
    text: "Collaborative problem-solving sessions revealed important group dynamics. Some teammates naturally facilitated discussion while others excelled at detailed analysis. Understanding these complementary roles helped us work more efficiently and produce higher quality deliverables."
  },
  {
    id: 10,
    name: "STU005_Interview2",
    text: "Guest speakers from various industries brought theory to life with practical examples. Hearing how professionals actually use communication strategies in their work made the course material more relevant and applicable. Their real-world examples illustrated both successful and unsuccessful communication approaches."
  },
  {
    id: 11,
    name: "STU006_Interview1",
    text: "The asynchronous discussion board format suited my processing style perfectly. Having time to reflect on prompts before responding led to more thoughtful contributions. Reading classmates' diverse perspectives before formulating my own enriched my understanding of each topic significantly."
  },
  {
    id: 12,
    name: "STU006_Interview2",
    text: "Video presentations required mastering new technical skills alongside communication techniques. Learning to manage camera angles, lighting, and audio quality while delivering clear messages added complexity. This multimedia approach reflects modern business communication realities and expectations."
  },
  {
    id: 13,
    name: "STU007_Interview1",
    text: "Hands-on activities made business communication principles concrete and applicable. Actually drafting memos, emails, and reports reinforced formatting conventions and tone guidelines. The experiential learning approach proved far more effective than passive reading about these concepts."
  },
  {
    id: 14,
    name: "STU007_Interview2",
    text: "Progressive assignments built upon previous work throughout the semester creating continuity. Early foundational concepts about audience analysis informed later projects on persuasive communication. This scaffolded approach demonstrated how professional communication skills develop cumulatively over time."
  },
  {
    id: 15,
    name: "STU008_Interview1",
    text: "Setting specific learning objectives at the semester's start focused my efforts strategically. Having clear goals for improving presentation skills and written communication made progress measurable and trackable. Regular self-assessment against these objectives kept me accountable and motivated throughout."
  },
  {
    id: 16,
    name: "STU008_Interview2",
    text: "Case studies from multiple industries illustrated universal communication principles across contexts. Seeing how healthcare, technology, and finance sectors all face similar stakeholder communication challenges was illuminating. The varied examples made theories applicable across diverse career paths and settings."
  }
];

// Application state
const state = {
  transcripts: [],
  analysis: null,
  chartInstances: {}
};

// Pattern name generator based on keywords
function generatePatternName(keywords) {
  const kw = keywords.map(k => k.toLowerCase());
  
  if (kw.some(k => k.includes('team') || k.includes('group') || k.includes('collaborat'))) {
    return "Collaboration & Teamwork";
  } else if (kw.some(k => k.includes('feedback') || k.includes('peer') || k.includes('review') || k.includes('revis'))) {
    return "Peer Feedback & Revision";
  } else if (kw.some(k => k.includes('time') || k.includes('management') || k.includes('plan') || k.includes('organiz'))) {
    return "Time Management & Planning";
  } else if (kw.some(k => k.includes('present') || k.includes('speak') || k.includes('deliver') || k.includes('audience'))) {
    return "Presentation & Communication";
  } else if (kw.some(k => k.includes('theory') || k.includes('practice') || k.includes('case') || k.includes('apply') || k.includes('real'))) {
    return "Theory to Practice Integration";
  } else if (kw.some(k => k.includes('writ') || k.includes('draft') || k.includes('essay'))) {
    return "Writing Development";
  } else if (kw.some(k => k.includes('learn') || k.includes('understand') || k.includes('concept'))) {
    return "Learning & Understanding";
  } else if (kw.some(k => k.includes('help') || k.includes('support') || k.includes('office') || k.includes('instructor'))) {
    return "Support & Resources";
  } else {
    return "Learning Theme";
  }
}

// Generate educational insight based on pattern
function generateInsight(keywords, quotes) {
  const name = generatePatternName(keywords);
  
  if (name.includes("Collaboration")) {
    return "This pattern highlights the importance of teamwork, coordination, and leveraging diverse team member perspectives. Students emphasize effective delegation, understanding complementary roles, and how collaborative work exposes them to different problem-solving approaches.";
  } else if (name.includes("Feedback")) {
    return "This pattern reveals the value of peer review and iterative improvement processes. Students recognize that constructive criticism, multiple revision cycles, and incorporating feedback from multiple sources lead to higher quality work and deeper learning outcomes.";
  } else if (name.includes("Time")) {
    return "This pattern focuses on time management strategies and organizational skills development. Students discuss prioritization techniques, use of project management tools, and the importance of breaking large tasks into manageable daily milestones to maintain quality while meeting deadlines.";
  } else if (name.includes("Presentation")) {
    return "This pattern centers on developing presentation and public speaking abilities. Students describe overcoming nervousness through deliberate practice, improving delivery techniques like pacing and eye contact, and learning to engage audiences more effectively through structured feedback.";
  } else if (name.includes("Theory")) {
    return "This pattern demonstrates the value of connecting theoretical concepts to real-world applications and case studies. Students express that practical examples, stakeholder analysis exercises, and industry contexts make abstract ideas more tangible, memorable, and applicable to professional settings.";
  } else if (name.includes("Writing")) {
    return "This pattern emphasizes writing skill development through revision processes and feedback integration. Students highlight how draft refinement, peer critique, attention to audience needs, and multiple iterations improve their professional communication abilities significantly.";
  } else if (name.includes("Learning")) {
    return "This pattern reveals metacognitive awareness about personal learning processes and strategies. Students demonstrate understanding of how they learn best, apply strategies for deeper comprehension, and show self-awareness about their educational development and growth areas.";
  } else if (name.includes("Support")) {
    return "This pattern emphasizes the importance of utilizing available learning resources and support systems. Students recognize that office hours, instructor guidance, personalized explanations, and peer assistance significantly enhance learning outcomes and prevent knowledge gaps.";
  } else {
    return `This pattern identifies a cluster of related concepts and themes. The transcripts grouped here share common focus areas around: ${keywords.slice(0, 4).join(', ')}. Further qualitative analysis can reveal deeper connections.`;
  }
}

// Update dashboard KPIs
function updateDashboard() {
  document.getElementById('totalTranscripts').textContent = state.transcripts.length;
  const totalWords = state.transcripts.reduce((sum, t) => sum + t.text.split(' ').length, 0);
  document.getElementById('totalWords').textContent = totalWords.toLocaleString();
  document.getElementById('analyzeBtn').disabled = state.transcripts.length === 0;
}

// Render dashboard charts
function renderDashboard() {
  const container = document.getElementById('dashboardContent');
  if (!state.analysis) return;

  const { labels, keywords, counts, texts, patternNames } = state.analysis;

  // Destroy existing charts
  Object.values(state.chartInstances).forEach(chart => chart.destroy());
  state.chartInstances = {};

  // Create dashboard HTML
  container.innerHTML = `
    <div class="dashboard-grid">
      <div class="stat-card">
        <div class="stat-value">${texts.length}</div>
        <div class="stat-label">Total Transcripts</div>
      </div>
      <div class="stat-card">
        <div class="stat-value">${keywords.length}</div>
        <div class="stat-label">Patterns Found</div>
      </div>
      <div class="stat-card">
        <div class="stat-value">${keywords.flat().length}</div>
        <div class="stat-label">Keywords Extracted</div>
      </div>
      <div class="stat-card">
        <div class="stat-value">${texts.reduce((s, t) => s + t.split(' ').length, 0)}</div>
        <div class="stat-label">Total Words Analyzed</div>
      </div>
    </div>

    <div style="display:grid;grid-template-columns:2fr 1fr;gap:20px;margin-bottom:20px">
      <div class="chart-container">
        <div class="chart-title">Pattern Distribution Across Transcripts</div>
        <canvas id="barChart" height="100"></canvas>
      </div>
      <div class="chart-container">
        <div class="chart-title">Transcript Breakdown by Theme</div>
        <canvas id="pieChart"></canvas>
      </div>
    </div>
  `;

  // Create bar chart
  const barCtx = document.getElementById('barChart').getContext('2d');
  state.chartInstances.bar = new Chart(barCtx, {
    type: 'bar',
    data: {
      labels: patternNames,
      datasets: [{
        label: 'Number of Transcripts',
        data: Object.values(counts),
        backgroundColor: 'rgba(47, 129, 247, 0.7)',
        borderColor: 'rgba(47, 129, 247, 1)',
        borderWidth: 1
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: true,
      plugins: {
        legend: { display: false },
        tooltip: {
          backgroundColor: '#161b22',
          borderColor: 'rgba(240, 246, 252, 0.1)',
          borderWidth: 1
        }
      },
      scales: {
        y: {
          beginAtZero: true,
          ticks: { color: '#7d8590' },
          grid: { color: 'rgba(240, 246, 252, 0.05)' }
        },
        x: {
          ticks: { 
            color: '#7d8590',
            maxRotation: 45,
            minRotation: 0
          },
          grid: { color: 'rgba(240, 246, 252, 0.05)' }
        }
      }
    }
  });

  // Create pie chart
  const pieCtx = document.getElementById('pieChart').getContext('2d');
  state.chartInstances.pie = new Chart(pieCtx, {
    type: 'doughnut',
    data: {
      labels: patternNames,
      datasets: [{
        data: Object.values(counts),
        backgroundColor: [
          'rgba(47, 129, 247, 0.8)',
          'rgba(63, 185, 80, 0.8)',
          'rgba(210, 153, 34, 0.8)',
          'rgba(240, 136, 62, 0.8)'
        ],
        borderWidth: 2,
        borderColor: '#161b22'
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: true,
      plugins: {
        legend: {
          position: 'bottom',
          labels: { 
            color: '#7d8590',
            padding: 10,
            font: { size: 11 }
          }
        },
        tooltip: {
          backgroundColor: '#161b22',
          borderColor: 'rgba(240, 246, 252, 0.1)',
          borderWidth: 1
        }
      }
    }
  });
}

// Render pattern analysis view
function renderPatterns() {
  const container = document.getElementById('patternsContent');
  if (!state.analysis) return;

  const { keywords, insights, reps, counts, patternNames } = state.analysis;

  let html = '';
  for (let i = 0; i < keywords.length; i++) {
    html += `
      <div class="pattern-card">
        <div class="pattern-header">
          <div>
            <div class="pattern-title">${patternNames[i]}</div>
            <div class="pattern-subtitle">Pattern ${i + 1} ‚Ä¢ ${counts[i] || 0} transcripts</div>
          </div>
        </div>
        
        <div class="keywords">
          ${keywords[i].map(kw => `<span class="keyword">${escapeHTML(kw)}</span>`).join("")}
        </div>

        <div class="ai-insight">
          <div class="ai-insight-header">ü§ñ AI-Generated Educational Interpretation</div>
          <div class="ai-insight-content">${escapeHTML(insights[i])}</div>
        </div>

        ${(reps[i] || []).map(q => `
          <div class="quote">"${escapeHTML(q)}"</div>
        `).join("")}
      </div>
    `;
  }

  container.innerHTML = html;
}

// Text preprocessing
function cleanText(s) {
  return String(s || "")
    .toLowerCase()
    .replace(/https?:\/\/\S+/g, " ")
    .replace(/[^a-z0-9\s']/g, " ")
    .replace(/\s+/g, " ")
    .trim();
}

// Tokenization with stopword removal
function tokenize(s) {
  const stopWords = new Set([
    "the", "a", "an", "and", "or", "but", "if", "then", "else", "when", "while",
    "to", "of", "in", "on", "for", "with", "as", "at", "by", "is", "are", "was",
    "were", "be", "been", "being", "it", "this", "that", "these", "those", "i",
    "we", "you", "they", "he", "she", "my", "our", "your", "their", "me", "us",
    "him", "her", "them", "from", "into", "about", "over", "under", "again",
    "very", "really", "just", "so", "because", "can", "could", "should", "would",
    "will", "did", "do", "does", "done", "than", "too", "also", "not"
  ]);
  
  return s.split(" ")
    .map(t => t.trim())
    .filter(t => t.length >= 3 && !stopWords.has(t));
}

// Build vocabulary from documents
function buildVocab(docs) {
  const df = new Map();
  const tdocs = [];
  
  docs.forEach(d => {
    const toks = tokenize(cleanText(d));
    const uniq = new Set(toks);
    uniq.forEach(t => df.set(t, (df.get(t) || 0) + 1));
    tdocs.push(toks);
  });

  const terms = [...df.entries()]
    .filter(([t, c]) => c >= 1)
    .sort((a, b) => b[1] - a[1])
    .slice(0, 2500)
    .map(([t]) => t);

  const idx = new Map();
  terms.forEach((t, i) => idx.set(t, i));
  
  return { terms, idx, tdocs };
}

// TF-IDF matrix computation
function tfidfMatrix(tdocs, terms, idx) {
  const N = tdocs.length;
  const df = new Array(terms.length).fill(0);

  const tf = tdocs.map(toks => {
    const counts = new Map();
    toks.forEach(t => {
      if (idx.has(t)) {
        counts.set(t, (counts.get(t) || 0) + 1);
      }
    });
    counts.forEach((v, t) => { 
      df[idx.get(t)] += 1; 
    });
    return counts;
  });

  const idf = df.map(dfi => Math.log((N + 1) / (dfi + 1)) + 1);

  const X = tf.map(counts => {
    const vec = new Array(terms.length).fill(0);
    counts.forEach((v, t) => {
      const j = idx.get(t);
      vec[j] = v * idf[j];
    });
    const norm = Math.sqrt(vec.reduce((s, x) => s + x * x, 0)) || 1;
    for (let j = 0; j < vec.length; j++) {
      vec[j] /= norm;
    }
    return vec;
  });

  return { X };
}

// Cosine distance metric
function cosineDistance(a, b) {
  let dot = 0;
  for (let i = 0; i < a.length; i++) {
    dot += a[i] * b[i];
  }
  return 1 - dot;
}

// K-means clustering algorithm
function kmeans(X, k, iters = 25) {
  const n = X.length;
  const d = X[0].length;

  // Random initialization
  const idxs = [...Array(n).keys()];
  for (let i = idxs.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [idxs[i], idxs[j]] = [idxs[j], idxs[i]];
  }
  
  let centers = idxs.slice(0, k).map(i => X[i].slice());
  let labels = new Array(n).fill(0);

  // Iterate
  for (let it = 0; it < iters; it++) {
    let changed = false;
    
    // Assignment step
    for (let i = 0; i < n; i++) {
      let best = 0;
      let bestDist = Infinity;
      for (let c = 0; c < k; c++) {
        const dist = cosineDistance(X[i], centers[c]);
        if (dist < bestDist) {
          bestDist = dist;
          best = c;
        }
      }
      if (labels[i] !== best) {
        labels[i] = best;
        changed = true;
      }
    }
    
    // Update step
    const newCenters = Array.from({ length: k }, () => new Array(d).fill(0));
    const counts = new Array(k).fill(0);
    
    for (let i = 0; i < n; i++) {
      const c = labels[i];
      counts[c] += 1;
      const xi = X[i];
      for (let j = 0; j < d; j++) {
        newCenters[c][j] += xi[j];
      }
    }
    
    for (let c = 0; c < k; c++) {
      if (counts[c] === 0) continue;
      for (let j = 0; j < d; j++) {
        newCenters[c][j] /= counts[c];
      }
      const norm = Math.sqrt(newCenters[c].reduce((s, x) => s + x * x, 0)) || 1;
      for (let j = 0; j < d; j++) {
        newCenters[c][j] /= norm;
      }
    }
    
    centers = newCenters;
    if (!changed) break;
  }
  
  return { labels, centers };
}

// Extract top keywords for each cluster
function topKeywordsForCluster(centers, terms, topN) {
  return centers.map(center => {
    const pairs = center.map((w, i) => [i, w]);
    pairs.sort((a, b) => b[1] - a[1]);
    return pairs.slice(0, topN).map(([i]) => terms[i]);
  });
}

// Find representative quotes for each cluster
function representativeQuotes(X, labels, centers, texts, perCluster) {
  const reps = [];
  
  for (let c = 0; c < centers.length; c++) {
    const items = [];
    for (let i = 0; i < X.length; i++) {
      if (labels[i] !== c) continue;
      const dist = cosineDistance(X[i], centers[c]);
      items.push([dist, i]);
    }
    items.sort((a, b) => a[0] - b[0]);
    reps[c] = items.slice(0, perCluster).map(([, i]) => texts[i]);
  }
  
  return reps;
}

// HTML escape utility
function escapeHTML(str) {
  return String(str)
    .replaceAll("&", "&amp;")
    .replaceAll("<", "&lt;")
    .replaceAll(">", "&gt;")
    .replaceAll('"', "&quot;");
}

// Main analysis function
function runAnalysis() {
  const texts = state.transcripts.map(t => t.text);
  const k = Math.min(3, Math.max(2, Math.floor(texts.length / 5)));

  document.getElementById('status').textContent = 'Analyzing transcripts...';
  document.getElementById('dashboardContent').innerHTML = '<div class="loading"><div class="spinner"></div><p>Processing data and detecting patterns...</p></div>';

  // Use setTimeout to allow UI to update
  setTimeout(() => {
    try {
      // Build vocabulary
      const { terms, idx, tdocs } = buildVocab(texts);
      
      if (terms.length < 5) {
        document.getElementById('status').textContent = 'Not enough text data for analysis';
        document.getElementById('status').classList.add('error');
        document.getElementById('dashboardContent').innerHTML = '<div class="empty-state"><div style="font-size:48px">‚ö†Ô∏è</div><p>Insufficient data for meaningful pattern detection</p></div>';
        return;
      }

      // Compute TF-IDF matrix
      const { X } = tfidfMatrix(tdocs, terms, idx);
      
      // Run K-means clustering
      const { labels, centers } = kmeans(X, k, 25);
      
      // Extract keywords for each cluster
      const keywords = topKeywordsForCluster(centers, terms, 6);
      
      // Find representative quotes
      const reps = representativeQuotes(X, labels, centers, texts, 2);
      
      // Generate pattern names
      const patternNames = keywords.map(kw => generatePatternName(kw));
      
      // Generate insights
      const insights = keywords.map((kw, i) => generateInsight(kw, reps[i]));

      // Count transcripts per pattern
      const counts = labels.reduce((acc, l) => {
        acc[l] = (acc[l] || 0) + 1;
        return acc;
      }, {});

      // Store analysis results
      state.analysis = {
        labels,
        keywords,
        reps,
        insights,
        counts,
        texts,
        patternNames
      };

      // Render results
      renderDashboard();
      renderPatterns();

      // Update status
      document.getElementById('status').textContent = '‚úì Analysis complete';
      document.getElementById('status').classList.remove('error');
      
    } catch (err) {
      console.error('Analysis error:', err);
      document.getElementById('status').textContent = 'Analysis error occurred';
      document.getElementById('status').classList.add('error');
    }
  }, 500);
}

// Event Listeners
document.getElementById('loadSample').addEventListener('click', () => {
  state.transcripts = [...SAMPLE_DATA];
  updateDashboard();
  document.getElementById('status').textContent = '‚úì Sample data loaded (16 transcripts)';
  document.getElementById('status').classList.remove('error');
});

document.getElementById('analyzeBtn').addEventListener('click', runAnalysis);

// Tab switching
document.querySelectorAll('.tab').forEach(tab => {
  tab.addEventListener('click', () => {
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
    
    tab.classList.add('active');
    const targetTab = tab.dataset.tab;
    document.getElementById(`tab-${targetTab}`).classList.add('active');
  });
});

// Initialize
updateDashboard();
</script>
</body>
</html>
